import{a as n,j as e}from"./index-D0rBU8mI.js";import{a as l}from"./index-xsH4HHeE.js";import{a as d}from"./index-CjQjypWB.js";import{S as i}from"./sweetalert2.esm.all-89IKscqO.js";import{C as p,a as x}from"./CRow-CGjkGb4u.js";import{C as j,a as C}from"./CCardBody-B6T690o9.js";import{C as f}from"./CCardHeader-QsUAgxmb.js";import{C as w}from"./CCardTitle-ByewHokU.js";import{C as b,a as g,b as c,c as r,d as B,e as t}from"./CTable-C8iVPGj2.js";import{a as T}from"./index.esm-BCXXLE8e.js";const z=()=>{const[h,m]=n.useState([]);n.useEffect(()=>{(async()=>{try{const s=d.get("login"),o=await l.get("https://be-mirai.valla.cloud/api/adm/usr/all",{headers:{Authorization:`Bearer ${s}`}});m(o.data.data||[])}catch(s){console.error("Gagal mengambil data user:",s)}})()},[]);const u=async a=>{const{value:s}=await i.fire({title:"Reset Password",input:"password",inputLabel:`Masukkan password baru untuk User ID: ${a}`,inputPlaceholder:"Password baru",showCancelButton:!0,confirmButtonText:"Reset",cancelButtonText:"Batal",inputAttributes:{minlength:6,required:!0}});if(s)try{const o=d.get("login");await l.put("https://be-mirai.valla.cloud/api/adm/usr/resetpass",{userid:a,password:s},{headers:{Authorization:`Bearer ${o}`}}),i.fire("Berhasil!",`Password untuk ${a} telah direset.`,"success")}catch(o){console.error("Gagal reset password:",o),i.fire("Gagal!","Terjadi kesalahan saat mereset password.","error")}};return e.jsx(p,{children:e.jsx(x,{xs:12,children:e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(w,{children:"Manajemen Pengguna"})}),e.jsx(C,{children:e.jsxs(b,{responsive:!0,hover:!0,children:[e.jsx(g,{children:e.jsxs(c,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"User ID"}),e.jsx(r,{children:"Nama"}),e.jsx(r,{children:"Email"}),e.jsx(r,{children:"Role"}),e.jsx(r,{children:"Aksi"})]})}),e.jsx(B,{children:h.map((a,s)=>e.jsxs(c,{children:[e.jsx(t,{children:s+1}),e.jsx(t,{children:a.UserID}),e.jsx(t,{children:a.nama}),e.jsx(t,{children:a.email}),e.jsx(t,{children:a.roleid}),e.jsx(t,{children:e.jsx(T,{size:"sm",color:"warning",onClick:()=>u(a.UserID),children:"Reset Password"})})]},a.UserID))})]})})]})})})};export{z as default};
