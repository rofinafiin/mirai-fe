import{a as d,j as a}from"./index-Dql3S4fj.js";import{a as m}from"./index-xsH4HHeE.js";import{a as u}from"./index-CjQjypWB.js";import{C as k,a as y}from"./CRow-BBrMMdzX.js";import{C as w,a as B}from"./CCardBody-CjRpNjfv.js";import{C as v}from"./CCardHeader-CAXDJ9ss.js";import{C as D}from"./CCardTitle-BADrg40C.js";import{C as R,a as $,b as C,c as p,d as z,e as h}from"./CTable-BfGRDE3P.js";import{a as K}from"./index.esm-D-22K3vy.js";const V=()=>{const[b,j]=d.useState([]),[l,x]=d.useState({}),c={kognitif:"Tes Kognitif",keahlian:"Tes Keahlian","bahasa-jepang":"Tes Bahasa Jepang"};d.useEffect(()=>{(async()=>{try{const s=u.get("login"),t=(await m.get("https://mirai-be.valla.cloud/api/company/tkd",{headers:{Authorization:`Bearer ${s}`}})).data.data||[];j(t);for(const i of t){const o={};for(const n of Object.keys(c))try{const g=await m.post(`https://mirai-be.valla.cloud/api/adm/usr/${n}`,{userid:i.userid},{headers:{Authorization:`Bearer ${s}`},responseType:"blob"});o[n]=g.data.size>0}catch{o[n]=!1}x(n=>({...n,[i.userid]:o}))}}catch(s){console.error("Gagal mengambil data:",s)}})()},[]);const f=async(e,s)=>{try{const r=u.get("login"),t=await m.post(`https://mirai-be.valla.cloud/api/adm/usr/${e}`,{userid:s},{headers:{Authorization:`Bearer ${r}`},responseType:"blob"}),i=new Blob([t.data],{type:"application/pdf"}),o=URL.createObjectURL(i);window.open(o,"_blank")}catch(r){console.error(`Gagal membuka dokumen ${e}:`,r)}},T=(e,s)=>{var t;return((t=l==null?void 0:l[e])==null?void 0:t[s])?a.jsx(K,{size:"sm",color:"info",onClick:()=>f(s,e),children:"View"}):a.jsx("span",{className:"text-danger",children:"Belum diisi"})};return a.jsx(k,{children:a.jsx(y,{xs:12,children:a.jsxs(w,{children:[a.jsx(v,{children:a.jsx(D,{children:"Dokumen Tes Kemampuan Dasar (TKD)"})}),a.jsx(B,{children:a.jsxs(R,{responsive:!0,hover:!0,children:[a.jsx($,{children:a.jsxs(C,{children:[a.jsx(p,{children:"No"}),a.jsx(p,{children:"Nama"}),Object.values(c).map(e=>a.jsx(p,{children:e},e))]})}),a.jsx(z,{children:b.map((e,s)=>a.jsxs(C,{children:[a.jsx(h,{children:s+1}),a.jsx(h,{children:e.nama}),Object.keys(c).map(r=>a.jsx(h,{children:T(e.userid,r)},r))]},e.userid))})]})})]})})})};export{V as default};
