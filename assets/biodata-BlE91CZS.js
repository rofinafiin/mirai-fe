import{q as x,a as u,j as a}from"./index-Dgy0Bi0q.js";import{a as g}from"./index-CjQjypWB.js";import{S as s}from"./sweetalert2.esm.all-89IKscqO.js";import{b as C,a as _}from"./index.esm-CVMAOj2W.js";import{C as k,a as b}from"./CCardBody-DnyiPBuR.js";import{C as f}from"./CCardHeader-DaXQcvJF.js";import{C as v}from"./CForm-B2Ug0veE.js";import{C as l,a as r}from"./CRow-DcBI43CM.js";import{C as t}from"./CFormLabel-BzwVPPwp.js";import{C as o}from"./CFormInput-Dvq2H025.js";import{C as F}from"./CFormSelect-Cw5aSCRR.js";import"./CFormControlWrapper-DcWyHsdI.js";import"./CFormControlValidation-C6-sXGLc.js";import"./CFormText-Bbf74XKV.js";const J=()=>{const c=x(),[e,p]=u.useState({nama:"",jenis_kelamin:"",nomor_paspor:"",phone_number:"",tanggal_lahir:"",tempat_lahir:"",nik_ktp:"",alamat:"",email:"",nama_ortu:"",handphone_ortu:"",alamat_ortu:""}),n=d=>{const{name:h,value:i}=d.target;p(m=>({...m,[h]:i}))},j=d=>{d.preventDefault();const h=g.get("login");if(!h)return s.fire({icon:"warning",title:"Tidak ada token",text:"Silakan login terlebih dahulu."});s.fire({title:"Menyimpan biodata...",text:"Mohon tunggu sebentar.",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{s.showLoading()}}),fetch("http://128.199.221.169:3000/api/users/administrasi/biodata",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(e)}).then(i=>i.json().then(m=>({ok:i.ok,data:m}))).then(({ok:i,data:m})=>{if(s.close(),!i)return s.fire({icon:"error",title:"Gagal Menyimpan",text:m.message||"Terjadi kesalahan saat menyimpan biodata."});s.fire({icon:"success",title:"Berhasil!",text:"Biodata berhasil disimpan."}).then(()=>{c("/tahapan/dokumen")})}).catch(i=>{s.close(),console.error("Error:",i),s.fire({icon:"error",title:"Kesalahan Jaringan",text:"Tidak dapat terhubung ke server. Coba lagi nanti."})})};return a.jsx(C,{children:a.jsxs(k,{className:"mt-4",children:[a.jsx(f,{children:a.jsx("h4",{children:"Biodata"})}),a.jsx(b,{children:a.jsxs(v,{onSubmit:j,children:[a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nama",children:"Nama Lengkap"}),a.jsx(o,{name:"nama",value:e.nama,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"jenis_kelamin",children:"Jenis Kelamin"}),a.jsxs(F,{name:"jenis_kelamin",value:e.jenis_kelamin,onChange:n,children:[a.jsx("option",{value:"",children:"Pilih"}),a.jsx("option",{value:"L",children:"Laki-laki"}),a.jsx("option",{value:"P",children:"Perempuan"})]})]})]}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nomor_paspor",children:"Nomor Paspor"}),a.jsx(o,{name:"nomor_paspor",value:e.nomor_paspor,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"phone_number",children:"Nomor HP"}),a.jsx(o,{name:"phone_number",value:e.phone_number,onChange:n})]})]}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"tanggal_lahir",children:"Tanggal Lahir"}),a.jsx(o,{type:"date",name:"tanggal_lahir",value:e.tanggal_lahir,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"tempat_lahir",children:"Tempat Lahir"}),a.jsx(o,{name:"tempat_lahir",value:e.tempat_lahir,onChange:n})]})]}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nik_ktp",children:"NIK KTP"}),a.jsx(o,{name:"nik_ktp",value:e.nik_ktp,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"email",children:"Email"}),a.jsx(o,{type:"email",name:"email",value:e.email,onChange:n})]})]}),a.jsx(l,{className:"mb-3",children:a.jsxs(r,{children:[a.jsx(t,{htmlFor:"alamat",children:"Alamat"}),a.jsx(o,{name:"alamat",value:e.alamat,onChange:n})]})}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nama_ortu",children:"Nama Orang Tua"}),a.jsx(o,{name:"nama_ortu",value:e.nama_ortu,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"handphone_ortu",children:"Nomor HP Orang Tua"}),a.jsx(o,{name:"handphone_ortu",value:e.handphone_ortu,onChange:n})]})]}),a.jsx(l,{className:"mb-3",children:a.jsxs(r,{children:[a.jsx(t,{htmlFor:"alamat_ortu",children:"Alamat Orang Tua"}),a.jsx(o,{name:"alamat_ortu",value:e.alamat_ortu,onChange:n})]})}),a.jsx(_,{type:"submit",color:"primary",children:"Simpan Biodata"})]})})]})})};export{J as default};
