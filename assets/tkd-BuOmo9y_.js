import{a as d,j as e}from"./index-Dgy0Bi0q.js";import{a as p}from"./index-xsH4HHeE.js";import{a as u}from"./index-CjQjypWB.js";import{C as k,a as y}from"./CRow-DcBI43CM.js";import{C as w,a as B}from"./CCardBody-DnyiPBuR.js";import{C as D}from"./CCardHeader-DaXQcvJF.js";import{C as R}from"./CCardTitle-C53dOXnu.js";import{C as $,a as v,b as C,c as h,d as z,e as m}from"./CTable-bxCWXPWN.js";import{a as K}from"./index.esm-CVMAOj2W.js";const V=()=>{const[j,x]=d.useState([]),[c,b]=d.useState({}),l={kognitif:"Tes Kognitif",keahlian:"Tes Keahlian","bahasa-jepang":"Tes Bahasa Jepang"};d.useEffect(()=>{(async()=>{try{const s=u.get("login"),t=(await p.get("http://128.199.221.169:3000/api/company/tkd",{headers:{Authorization:`Bearer ${s}`}})).data.data||[];x(t);for(const i of t){const o={};for(const n of Object.keys(l))try{const g=await p.post(`http://128.199.221.169:3000/api/adm/usr/${n}`,{userid:i.userid},{headers:{Authorization:`Bearer ${s}`},responseType:"blob"});o[n]=g.data.size>0}catch{o[n]=!1}b(n=>({...n,[i.userid]:o}))}}catch(s){console.error("Gagal mengambil data:",s)}})()},[]);const f=async(a,s)=>{try{const r=u.get("login"),t=await p.post(`http://128.199.221.169:3000/api/adm/usr/${a}`,{userid:s},{headers:{Authorization:`Bearer ${r}`},responseType:"blob"}),i=new Blob([t.data],{type:"application/pdf"}),o=URL.createObjectURL(i);window.open(o,"_blank")}catch(r){console.error(`Gagal membuka dokumen ${a}:`,r)}},T=(a,s)=>{var t;return((t=c==null?void 0:c[a])==null?void 0:t[s])?e.jsx(K,{size:"sm",color:"info",onClick:()=>f(s,a),children:"View"}):e.jsx("span",{className:"text-danger",children:"Belum diisi"})};return e.jsx(k,{children:e.jsx(y,{xs:12,children:e.jsxs(w,{children:[e.jsx(D,{children:e.jsx(R,{children:"Dokumen Tes Kemampuan Dasar (TKD)"})}),e.jsx(B,{children:e.jsxs($,{responsive:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(C,{children:[e.jsx(h,{children:"No"}),e.jsx(h,{children:"Nama"}),Object.values(l).map(a=>e.jsx(h,{children:a},a))]})}),e.jsx(z,{children:j.map((a,s)=>e.jsxs(C,{children:[e.jsx(m,{children:s+1}),e.jsx(m,{children:a.nama}),Object.keys(l).map(r=>e.jsx(m,{children:T(a.userid,r)},r))]},a.userid))})]})})]})})})};export{V as default};
