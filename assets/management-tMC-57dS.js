import{a as i,j as e}from"./index-Dgy0Bi0q.js";import{a as l}from"./index-xsH4HHeE.js";import{a as d}from"./index-CjQjypWB.js";import{S as n}from"./sweetalert2.esm.all-89IKscqO.js";import{C as x,a as u}from"./CRow-DcBI43CM.js";import{C as j,a as C}from"./CCardBody-DnyiPBuR.js";import{C as f}from"./CCardHeader-DaXQcvJF.js";import{C as w}from"./CCardTitle-C53dOXnu.js";import{C as g,a as b,b as c,c as a,d as B,e as t}from"./CTable-bxCWXPWN.js";import{a as T}from"./index.esm-CVMAOj2W.js";const z=()=>{const[h,m]=i.useState([]);i.useEffect(()=>{(async()=>{try{const r=d.get("login"),o=await l.get("http://128.199.221.169:3000/api/adm/usr/all",{headers:{Authorization:`Bearer ${r}`}});m(o.data.data||[])}catch(r){console.error("Gagal mengambil data user:",r)}})()},[]);const p=async s=>{const{value:r}=await n.fire({title:"Reset Password",input:"password",inputLabel:`Masukkan password baru untuk User ID: ${s}`,inputPlaceholder:"Password baru",showCancelButton:!0,confirmButtonText:"Reset",cancelButtonText:"Batal",inputAttributes:{minlength:6,required:!0}});if(r)try{const o=d.get("login");await l.put("http://128.199.221.169:3000/api/adm/usr/resetpass",{userid:s,password:r},{headers:{Authorization:`Bearer ${o}`}}),n.fire("Berhasil!",`Password untuk ${s} telah direset.`,"success")}catch(o){console.error("Gagal reset password:",o),n.fire("Gagal!","Terjadi kesalahan saat mereset password.","error")}};return e.jsx(x,{children:e.jsx(u,{xs:12,children:e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(w,{children:"Manajemen Pengguna"})}),e.jsx(C,{children:e.jsxs(g,{responsive:!0,hover:!0,children:[e.jsx(b,{children:e.jsxs(c,{children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"User ID"}),e.jsx(a,{children:"Nama"}),e.jsx(a,{children:"Email"}),e.jsx(a,{children:"Role"}),e.jsx(a,{children:"Aksi"})]})}),e.jsx(B,{children:h.map((s,r)=>e.jsxs(c,{children:[e.jsx(t,{children:r+1}),e.jsx(t,{children:s.UserID}),e.jsx(t,{children:s.nama}),e.jsx(t,{children:s.email}),e.jsx(t,{children:s.roleid}),e.jsx(t,{children:e.jsx(T,{size:"sm",color:"warning",onClick:()=>p(s.UserID),children:"Reset Password"})})]},s.UserID))})]})})]})})})};export{z as default};
