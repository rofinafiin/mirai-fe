import{q as x,a as u,j as a,v as g}from "./index-CysEViwc.js";import{S as s}from "./sweetalert2.esm.all-89IKscqO.js";import{b as C,a as k}from "./index.esm-GmE4fjiv.js";import{C as b,a as f}from "./CCardBody-Bn-CDoLE.js";import{C as _}from "./CCardHeader-BPzR0ALr.js";import{C as v}from "./CForm-DszknErW.js";import{C as m,a as r}from "./CRow-DMg1pzwh.js";import{C as i}from "./CFormLabel-BMX6aSk2.js";import{C as o}from "./CFormInput-CAjV3BkB.js";import{C as F}from "./CFormSelect-Bz7kINoX.js";import"./CFormControlWrapper-jvGQi9vb.js";import"./CFormControlValidation-CvUIvH4R.js";const J=()=>{const c=x(),[e,p]=u.useState({nama:"",jenis_kelamin:"",nomor_paspor:"",phone_number:"",tanggal_lahir:"",tempat_lahir:"",nik_ktp:"",alamat:"",email:""}),n= d=>{const{name:h,value:t}=d.target;p(l=>({...l,[h]:t}))},j= d=>{d.preventDefault();const h=g.get("login");if(!h)return s.fire({icon:"warning",title:"Tidak ada token",text:"Silakan login terlebih dahulu."});s.fire({title:"Menyimpan biodata...",text:"Mohon tunggu sebentar.",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{s.showLoading()}}),fetch("https://mirai-be.valla.cloud/api/users/administrasi/biodata",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(e)}).then(t=>t.json().then(l=>({ok:t.ok,data:l}))).then(({ok:t,data:l})=>{if(s.close(),!t)return s.fire({icon:"error",title:"Gagal Menyimpan",text:l.message||"Terjadi kesalahan saat menyimpan biodata."});s.fire({icon:"success",title:"Berhasil!",text:"Biodata berhasil disimpan."}).then(()=>{c("/tahapan/dokumen")})}).catch(t=>{s.close(),console.error("Error:",t),s.fire({icon:"error",title:"Kesalahan Jaringan",text:"Tidak dapat terhubung ke server. Coba lagi nanti."})})};return a.jsx(C,{children:a.jsxs(b,{className:"mt-4",children:[a.jsx(_,{children:a.jsx("h4",{children:"Biodata"})}),a.jsx(f,{children:a.jsxs(v,{onSubmit:j,children:[a.jsxs(m,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"nama",children:"Nama Lengkap"}),a.jsx(o,{name:"nama",value:e.nama,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"jenis_kelamin",children:"Jenis Kelamin"}),a.jsxs(F,{name:"jenis_kelamin",value:e.jenis_kelamin,onChange:n,children:[a.jsx("option",{value:"",children:"Pilih"}),a.jsx("option",{value:"L",children:"Laki-laki"}),a.jsx("option",{value:"P",children:"Perempuan"})]})]})]}),a.jsxs(m,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"nomor_paspor",children:"Nomor Paspor"}),a.jsx(o,{name:"nomor_paspor",value:e.nomor_paspor,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"phone_number",children:"Nomor HP"}),a.jsx(o,{name:"phone_number",value:e.phone_number,onChange:n})]})]}),a.jsxs(m,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"tanggal_lahir",children:"Tanggal Lahir"}),a.jsx(o,{type:"date",name:"tanggal_lahir",value:e.tanggal_lahir,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"tempat_lahir",children:"Tempat Lahir"}),a.jsx(o,{name:"tempat_lahir",value:e.tempat_lahir,onChange:n})]})]}),a.jsxs(m,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"nik_ktp",children:"NIK KTP"}),a.jsx(o,{name:"nik_ktp",value:e.nik_ktp,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(i,{htmlFor:"email",children:"Email"}),a.jsx(o,{type:"email",name:"email",value:e.email,onChange:n})]})]}),a.jsx(m,{className:"mb-3",children:a.jsxs(r,{children:[a.jsx(i,{htmlFor:"alamat",children:"Alamat"}),a.jsx(o,{name:"alamat",value:e.alamat,onChange:n})]})}),a.jsx(k,{type:"submit",color:"primary",children:"Simpan Biodata"})]})})]})})};export{J as default};
