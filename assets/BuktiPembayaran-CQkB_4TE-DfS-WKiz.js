import{f as p,Y as c,P as a}from"./index-CGU3vo64.js";import{a as h}from"./js.cookie-Cz0CWeBA-DHfMUIt6.js";import{p as e}from"./sweetalert2.esm.all-89IKscqO-BPwcxwDi.js";import{k as f,F as g}from"./index.esm-FQqkxIFl-DEuLJyVG.js";import{x as k,g as b}from"./CCardBody-CvGUaikZ-Cbh_plRX.js";import{r as x}from"./CCardHeader-CmASvoAE-CyvJ9ZC8.js";import{s as j}from"./CForm-r-UQHCbi-Bpj1qy0E.js";import{v as y,x as w}from"./CRow-Le1WPV72-CTgddwaj.js";import{r as B}from"./CFormLabel-CfD73OKN-BkIA6V_d.js";import{x as P}from"./CFormInput--yHu5c7w-DkLTT3Vi.js";import"./CFormControlWrapper-n9xfMDI3-ChWfB7C0.js";import"./CFormControlValidation-N-wD0Vij-C9z6iaq6.js";const L=()=>{const[n,s]=p.useState(null),m=c(),u=t=>{s(t.target.files[0])},d=t=>{if(t.preventDefault(),!n)return e.fire({icon:"warning",title:"File kosong",text:"Silakan pilih file bukti pembayaran terlebih dahulu."});const o=new FormData;o.append("bukti_pembayaran",n);const l=h.get("login");if(!l)return e.fire({icon:"warning",title:"Tidak ada token",text:"Silakan login ulang untuk melanjutkan."});e.fire({title:"Mengunggah dokumen...",text:"Mohon tunggu sebentar.",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{e.showLoading()}}),fetch("https://mirai-be.valla.cloud/api/users/administrasi/pembayaran",{method:"POST",body:o,headers:{Authorization:`Bearer ${l}`}}).then(r=>r.json().then(i=>({ok:r.ok,data:i}))).then(({ok:r,data:i})=>{if(e.close(),!r)return e.fire({icon:"error",title:"Gagal Upload",text:i.message||"Terjadi kesalahan saat mengunggah dokumen."});e.fire({icon:"success",title:"Berhasil Upload Dokumen",text:"Dokumen bukti pembayaran berhasil diunggah.",confirmButtonText:"Lanjutkan"}).then(()=>{m("/dashboard")})}).catch(r=>{e.close(),console.error("Upload error:",r),e.fire({icon:"error",title:"Kesalahan Server",text:"Gagal menghubungi server. Coba lagi nanti."})})};return a.jsx(f,{children:a.jsxs(k,{className:"mt-4",children:[a.jsx(x,{children:a.jsx("h4",{children:"Upload Bukti Pembayaran"})}),a.jsx(b,{children:a.jsxs(j,{onSubmit:d,encType:"multipart/form-data",children:[a.jsx(y,{className:"mb-3",children:a.jsxs(w,{md:6,children:[a.jsx(B,{htmlFor:"bukti_pembayaran",children:"Bukti Pembayaran"}),a.jsx(P,{type:"file",name:"bukti_pembayaran",accept:".pdf",onChange:u})]})}),a.jsx(g,{type:"submit",color:"primary",children:"Upload Bukti Pembayaran"})]})})]})})};export{L as default};
