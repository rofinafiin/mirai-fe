import{x as j,a as d,q as C,j as a}from"./index-DJ9f0Ii_.js";import{a as c}from"./index-xsH4HHeE.js";import{a as m}from"./index-CjQjypWB.js";import{C as k,a as b}from"./CCardBody-JA8bLE0l.js";import{C as T}from"./CCardHeader-Dx3Xime2.js";import{C as w}from"./CCardTitle-CJZENd4n.js";import{C as h,a as r}from"./CRow-mV3QtCNt.js";import{a as p}from"./index.esm-BYXe7yHD.js";import{C as B}from"./CFormLabel-DBcqE_GC.js";import{C as _}from"./CFormText-CVvCeKDN.js";const L=()=>{const{user_id:s}=j();console.log(s);const[n,u]=d.useState({kognitif:!1,keahlian:!1,bahasa_jepang:!1}),f=C();d.useEffect(()=>{(async()=>{try{const e=m.get("login"),t=(await c.get(`https://be-mirai.valla.cloud/api/adm/usr/tkdid/${s}`,{headers:{Authorization:`Bearer ${e}`}})).data.data;u({kognitif:!!t.tes_kognitif,keahlian:!!t.tes_keahlian,"bahasa-jepang":!!t.tes_bahasa_jepang})}catch(e){console.error("Gagal mengambil data TKD:",e)}})()},[s]);const x=async o=>{try{const e=m.get("login"),l=await c.post(`https://be-mirai.valla.cloud/api/adm/usr/${o}`,{userid:s},{headers:{Authorization:`Bearer ${e}`},responseType:"blob"}),t=new Blob([l.data],{type:"application/pdf"}),g=URL.createObjectURL(t);window.open(g,"_blank")}catch(e){console.error(`Gagal membuka file ${o}:`,e)}},i=(o,e)=>a.jsxs(h,{className:"mb-3",children:[a.jsx(r,{md:4,children:a.jsx(B,{children:o})}),a.jsx(r,{md:4,children:a.jsx(_,{className:n[e]?"text-success":"text-danger",children:n[e]?"✔️ Sudah diupload":"❌ Belum diupload"})}),a.jsx(r,{md:4,children:n[e]&&a.jsx(p,{size:"sm",color:"info",onClick:()=>x(e),children:"View"})})]},e);return a.jsxs(k,{children:[a.jsx(T,{children:a.jsxs(w,{children:["Dokumen Tes Kemampuan Dasar - ",s]})}),a.jsxs(b,{children:[i("Tes Kognitif","kognitif"),i("Tes Keahlian","keahlian"),i("Tes Bahasa Jepang","bahasa-jepang"),a.jsx(h,{children:a.jsx(r,{className:"d-flex justify-content-end",children:a.jsx(p,{color:"secondary",onClick:()=>f("/admin"),children:"Kembali ke Dashboard"})})})]})]})};export{L as default};
