import{a as h,j as e}from"./index-Dgy0Bi0q.js";import{a as x}from"./index-xsH4HHeE.js";import{a as p}from"./index-CjQjypWB.js";import{C as B,a as T}from"./CRow-DcBI43CM.js";import{C as R,a as z}from"./CCardBody-DnyiPBuR.js";import{C as L}from"./CCardHeader-DaXQcvJF.js";import{C as $}from"./CCardTitle-C53dOXnu.js";import{C as P,a as v,b as j,c as r,d as A,e as t}from"./CTable-bxCWXPWN.js";import{a as D}from"./index.esm-CVMAOj2W.js";const _=()=>{const[f,C]=h.useState([]),[m,b]=h.useState({}),[k,g]=h.useState({});h.useEffect(()=>{(async()=>{try{const a=p.get("login"),o=(await x.get("http://128.199.221.169:3000/api/company/calon-documents",{headers:{Authorization:`Bearer ${a}`}})).data.data||[];C(o);for(const d of o){const n={ktp:!1,ijazah:!1,sbahasa:!1,skeahlian:!1,sksehat:!1,cv:!1,foto:null};for(const c of Object.keys(n))try{const u=await x.post(`http://128.199.221.169:3000/api/adm/usr/${c}`,{userid:d.userid},{headers:{Authorization:`Bearer ${a}`},responseType:"blob"});if(c==="foto"){const S=URL.createObjectURL(u.data);g(U=>({...U,[d.userid]:S})),n[c]=!0}else u.data.size>0&&(n[c]=!0)}catch{}b(c=>({...c,[d.userid]:n}))}}catch(a){console.error("Gagal mengambil data pengguna:",a)}})()},[]);const y=async(s,a)=>{try{const l=p.get("login"),o=await x.post(`http://128.199.221.169:3000/api/adm/usr/${s}`,{userid:a},{headers:{Authorization:`Bearer ${l}`},responseType:"blob"}),d=new Blob([o.data],{type:"application/pdf"}),n=URL.createObjectURL(d);window.open(n,"_blank")}catch(l){console.error(`Gagal membuka dokumen ${s}:`,l)}},i=(s,a)=>{var o;return((o=m==null?void 0:m[s])==null?void 0:o[a])?e.jsx(D,{size:"sm",color:"info",onClick:()=>y(a,s),children:"View"}):e.jsx("span",{className:"text-danger",children:"Belum diisi"})},w=s=>{const a=k[s];return a?e.jsx("img",{src:a,alt:"Pas Foto",style:{width:"60px",borderRadius:"4px",border:"1px solid #ccc"}}):e.jsx("span",{className:"text-danger",children:"Belum diisi"})};return e.jsx(B,{children:e.jsx(T,{xs:12,children:e.jsxs(R,{children:[e.jsx(L,{children:e.jsx($,{children:"Dokumen Administrasi - Semua Pengguna"})}),e.jsx(z,{children:e.jsxs(P,{responsive:!0,hover:!0,children:[e.jsx(v,{children:e.jsxs(j,{children:[e.jsx(r,{children:"No"}),e.jsx(r,{children:"Nama"}),e.jsx(r,{children:"Scan KTP"}),e.jsx(r,{children:"Scan Ijazah"}),e.jsx(r,{children:"Sertifikat Bahasa"}),e.jsx(r,{children:"Sertifikat Keahlian"}),e.jsx(r,{children:"Surat Sehat"}),e.jsx(r,{children:"Pas Foto"}),e.jsx(r,{children:"CV"})]})}),e.jsx(A,{children:f.map((s,a)=>e.jsxs(j,{children:[e.jsx(t,{children:a+1}),e.jsx(t,{children:s.nama}),e.jsx(t,{children:i(s.userid,"ktp")}),e.jsx(t,{children:i(s.userid,"ijazah")}),e.jsx(t,{children:i(s.userid,"sbahasa")}),e.jsx(t,{children:i(s.userid,"skeahlian")}),e.jsx(t,{children:i(s.userid,"sksehat")}),e.jsx(t,{children:w(s.userid)}),e.jsx(t,{children:i(s.userid,"cv")})]},s.userid))})]})})]})})})};export{_ as default};
