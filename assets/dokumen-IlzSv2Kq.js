import{a as m,x as w,q as R,j as a}from"./index-D2V8nlRM.js";import{a as h}from"./index-xsH4HHeE.js";import{a as u}from"./index-CjQjypWB.js";import{C as S,a as B}from"./CCardBody-DUAaruPU.js";import{C as U}from"./CCardHeader-sLUiN65p.js";import{C as _}from"./CCardTitle-DoD2ziKM.js";import{C as p,a as i}from"./CRow-Ct7ALToq.js";import{C as x}from"./CFormLabel-B_0DC00u.js";import{C as j}from"./CFormText-CBJllJU5.js";import{a as f}from"./index.esm-Ca04DTdb.js";const E=()=>{const[l,b]=m.useState(null),{user_id:c}=w(),[d,k]=m.useState(null),C=R();m.useEffect(()=>{(async()=>{try{const e=u.get("login"),s=await h.get(`https://mirai-be.valla.cloud/api/adm/usr/administrasi/${c}`,{headers:{Authorization:`Bearer ${e}`}});k(s.data.data)}catch(e){console.error("Gagal mengambil data dokumen:",e)}})(),y("foto",b)},[c]);const g=async r=>{try{const e=u.get("login"),s=await h.post(`https://mirai-be.valla.cloud/api/adm/usr/${r}`,{userid:c},{headers:{Authorization:`Bearer ${e}`},responseType:"blob"}),t=new Blob([s.data],{type:"application/pdf"}),o=URL.createObjectURL(t);window.open(o,"_blank")}catch(e){console.error(`Gagal membuka dokumen ${r}:`,e)}},y=async(r,e)=>{try{const s=u.get("login"),t=await h.post(`https://mirai-be.valla.cloud/api/adm/usr/${r}`,{userid:c},{headers:{Authorization:`Bearer ${s}`},responseType:"blob"}),o=URL.createObjectURL(t.data);e(o)}catch(s){console.error(`Gagal menampilkan gambar ${r}:`,s)}},n=(r,e,s)=>{const t=d==null?void 0:d[e],o=t&&t.data&&t.data.length>0;return a.jsxs(p,{className:"mb-3",children:[a.jsx(i,{md:4,children:a.jsx(x,{children:r})}),a.jsx(i,{md:4,children:a.jsx(j,{className:o?"text-success":"text-danger",children:o?"✔️ Sudah diupload":"❌ Belum diupload"})}),a.jsx(i,{md:4,children:o&&a.jsx(f,{size:"sm",color:"info",onClick:()=>g(s),children:"View"})})]},e)};return a.jsxs(S,{children:[a.jsx(U,{children:a.jsxs(_,{children:["Dokumen Administrasi - ",c]})}),a.jsxs(B,{children:[n("Scan KTP","scan_ktp","ktp"),n("Scan Ijazah","scan_ijazah","ijazah"),n("Sertifikat Bahasa","sertifikat_bahasa","sbahasa"),n("Sertifikat Keahlian","sertifikat_keahlian","skeahlian"),n("Surat Keterangan Sehat","surat_keterangan_sehat","sksehat"),a.jsxs(p,{className:"mb-3",children:[a.jsx(i,{md:4,children:a.jsx(x,{children:"Pas Foto"})}),a.jsx(i,{md:4,children:a.jsx(j,{className:l?"text-success":"text-danger",children:l?"✔️ Sudah diupload":"❌ Belum diupload"})}),a.jsx(i,{md:4,children:l&&a.jsx("img",{src:l,alt:"Pas Foto",style:{width:"100px",borderRadius:"8px",border:"1px solid #ccc"}})})]}),n("Curriculum Vitae","curriculum_vitae","cv"),a.jsx(p,{children:a.jsx(i,{className:"d-flex justify-content-end",children:a.jsx(f,{color:"secondary",onClick:()=>C("/admin"),children:"Kembali ke Dashboard"})})})]})]})};export{E as default};
