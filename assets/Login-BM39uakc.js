import{a as y,q as b,j as a,L as w}from"./index-DJ9f0Ii_.js";import{b as N,c,a as i}from"./index.esm-BYXe7yHD.js";import{S as d}from"./sweetalert2.esm.all-89IKscqO.js";import{a as v,j as L}from"./index-CjQjypWB.js";import{C as m,a as o}from"./CRow-mV3QtCNt.js";import{C as S}from"./CCardGroup-CuC_ZM1q.js";import{C as p,a as h}from"./CCardBody-JA8bLE0l.js";import{C as D}from"./CForm-41JxCtiF.js";import{C as x,a as u}from"./CInputGroupText-D47yKMbu.js";import{c as I,a as T}from"./cil-user-Dlmw-Gem.js";import{C as j}from"./CFormInput-CjPbjmhL.js";import"./CFormControlWrapper-PisYgKH5.js";import"./CFormControlValidation-CZ6aAU_X.js";import"./CFormLabel-DBcqE_GC.js";import"./CFormText-CVvCeKDN.js";const Q=()=>{const[e,n]=y.useState({username:"",password:""}),g=b(),C=async s=>{s.preventDefault();try{const r=await fetch("https://be-mirai.valla.cloud/api/users/logs/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok){d.fire({icon:"error",title:"Gagal Login",text:t.message||"Terjadi kesalahan."});return}const k=18/24;v.set("login",t.token,{expires:k,path:"/",secure:!0,sameSite:"Strict"});const l=L(t.token),f=l.roleid===1?"/admin":l.roleid===12?"/company/biodata":"/dashboard";d.fire({icon:"success",title:"Login Berhasil!",text:"Anda Berhasil Login ke Dashboard"}).then(()=>{g(f)})}catch(r){console.error("Error:",r),alert("Terjadi kesalahan saat login")}};return a.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:a.jsx(N,{children:a.jsx(m,{className:"justify-content-center",children:a.jsx(o,{md:8,children:a.jsxs(S,{children:[a.jsx(p,{className:"p-4",children:a.jsx(h,{children:a.jsxs(D,{onSubmit:C,children:[a.jsx("h1",{children:"Login"}),a.jsx("p",{className:"text-body-secondary",children:"Masuk Menggunakan Akun Anda"}),a.jsxs(x,{className:"mb-3",children:[a.jsx(u,{children:a.jsx(c,{icon:I})}),a.jsx(j,{placeholder:"Username",autoComplete:"username",value:e.username,onChange:s=>n({...e,username:s.target.value})})]}),a.jsxs(x,{className:"mb-4",children:[a.jsx(u,{children:a.jsx(c,{icon:T})}),a.jsx(j,{type:"password",placeholder:"Password",autoComplete:"current-password",value:e.password,onChange:s=>n({...e,password:s.target.value})})]}),a.jsxs(m,{children:[a.jsx(o,{xs:6,children:a.jsx(i,{type:"submit",color:"primary",className:"px-4",children:"Login"})}),a.jsx(o,{xs:6,className:"text-right",children:a.jsx(i,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),a.jsx(p,{className:"text-white bg-primary py-5",style:{width:"44%"},children:a.jsx(h,{className:"text-center",children:a.jsxs("div",{children:[a.jsx("h2",{children:"Sign up"}),a.jsx("p",{children:"Aplikasi ini dibuat khusus untuk calon pekerja yang akan melakukan tahapan administrasi. Jika belum memiliki akun, silahkan lakukan registrasi dengan menekan tombol daftar dibawah ini."}),a.jsx(w,{to:"/register",children:a.jsx(i,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Daftar"})})]})})})]})})})})})};export{Q as default};
