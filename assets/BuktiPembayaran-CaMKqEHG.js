import{a as p,q as c,j as a}from"./index-BmUxf-W4.js";import{a as h}from"./index-CjQjypWB.js";import{S as e}from"./sweetalert2.esm.all-89IKscqO.js";import{b as f,a as b}from"./index.esm-CegkCxpS.js";import{C as g,a as k}from"./CCardBody-BuGbIR1M.js";import{C}from"./CCardHeader-BY9q6-ba.js";import{C as x}from"./CForm-BCpFP0OU.js";import{C as j,a as y}from"./CRow-COWdv7WZ.js";import{C as F}from"./CFormLabel-B8x8MA-m.js";import{C as S}from"./CFormInput-BxHjkWRv.js";import"./CFormControlWrapper-BS26FX2A.js";import"./CFormControlValidation-6GEEK3y9.js";import"./CFormText-Ck7FVgTK.js";const K=()=>{const[i,l]=p.useState(null),m=c(),u=r=>{l(r.target.files[0])},d=r=>{if(r.preventDefault(),!i)return e.fire({icon:"warning",title:"File kosong",text:"Silakan pilih file bukti pembayaran terlebih dahulu."});const o=new FormData;o.append("bukti_pembayaran",i);const s=h.get("login");if(!s)return e.fire({icon:"warning",title:"Tidak ada token",text:"Silakan login ulang untuk melanjutkan."});e.fire({title:"Mengunggah dokumen...",text:"Mohon tunggu sebentar.",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{e.showLoading()}}),fetch("https://mirai-be.valla.cloud/api/users/administrasi/pembayaran",{method:"POST",body:o,headers:{Authorization:`Bearer ${s}`}}).then(t=>t.json().then(n=>({ok:t.ok,data:n}))).then(({ok:t,data:n})=>{if(e.close(),!t)return e.fire({icon:"error",title:"Gagal Upload",text:n.message||"Terjadi kesalahan saat mengunggah dokumen."});e.fire({icon:"success",title:"Berhasil Upload Dokumen",text:"Dokumen bukti pembayaran berhasil diunggah.",confirmButtonText:"Lanjutkan"}).then(()=>{m("/dashboard")})}).catch(t=>{e.close(),console.error("Upload error:",t),e.fire({icon:"error",title:"Kesalahan Server",text:"Gagal menghubungi server. Coba lagi nanti."})})};return a.jsx(f,{children:a.jsxs(g,{className:"mt-4",children:[a.jsx(C,{children:a.jsx("h4",{children:"Upload Bukti Pembayaran"})}),a.jsx(k,{children:a.jsxs(x,{onSubmit:d,encType:"multipart/form-data",children:[a.jsx(j,{className:"mb-3",children:a.jsxs(y,{md:6,children:[a.jsx(F,{htmlFor:"bukti_pembayaran",children:"Bukti Pembayaran"}),a.jsx(S,{type:"file",name:"bukti_pembayaran",accept:".pdf",onChange:u})]})}),a.jsx(b,{type:"submit",color:"primary",children:"Upload Bukti Pembayaran"})]})})]})})};export{K as default};
