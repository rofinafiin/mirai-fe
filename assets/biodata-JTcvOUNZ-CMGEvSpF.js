import{Y as j,f as u,P as a}from"./index-CGU3vo64.js";import{a as g}from"./js.cookie-Cz0CWeBA-DHfMUIt6.js";import{p as s}from"./sweetalert2.esm.all-89IKscqO-BPwcxwDi.js";import{k,F as f}from"./index.esm-FQqkxIFl-DEuLJyVG.js";import{x as _,g as b}from"./CCardBody-CvGUaikZ-Cbh_plRX.js";import{r as v}from"./CCardHeader-CmASvoAE-CyvJ9ZC8.js";import{s as C}from"./CForm-r-UQHCbi-Bpj1qy0E.js";import{v as m,x as i}from"./CRow-Le1WPV72-CTgddwaj.js";import{r}from"./CFormLabel-CfD73OKN-BkIA6V_d.js";import{x as t}from"./CFormInput--yHu5c7w-DkLTT3Vi.js";import{m as y}from"./CFormSelect-Lq9VrEJv-CS2V-LSY.js";import"./CFormControlWrapper-n9xfMDI3-ChWfB7C0.js";import"./CFormControlValidation-N-wD0Vij-C9z6iaq6.js";const J=()=>{const p=j(),[e,c]=u.useState({nama:"",jenis_kelamin:"",nomor_paspor:"",phone_number:"",tanggal_lahir:"",tempat_lahir:"",nik_ktp:"",alamat:"",email:""}),n=d=>{const{name:h,value:l}=d.target;c(o=>({...o,[h]:l}))},x=d=>{d.preventDefault();const h=g.get("login");if(!h)return s.fire({icon:"warning",title:"Tidak ada token",text:"Silakan login terlebih dahulu."});s.fire({title:"Menyimpan biodata...",text:"Mohon tunggu sebentar.",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{s.showLoading()}}),fetch("https://mirai-be.valla.cloud/api/users/administrasi/biodata",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(e)}).then(l=>l.json().then(o=>({ok:l.ok,data:o}))).then(({ok:l,data:o})=>{if(s.close(),!l)return s.fire({icon:"error",title:"Gagal Menyimpan",text:o.message||"Terjadi kesalahan saat menyimpan biodata."});s.fire({icon:"success",title:"Berhasil!",text:"Biodata berhasil disimpan."}).then(()=>{p("/tahapan/dokumen")})}).catch(l=>{s.close(),console.error("Error:",l),s.fire({icon:"error",title:"Kesalahan Jaringan",text:"Tidak dapat terhubung ke server. Coba lagi nanti."})})};return a.jsx(k,{children:a.jsxs(_,{className:"mt-4",children:[a.jsx(v,{children:a.jsx("h4",{children:"Biodata"})}),a.jsx(b,{children:a.jsxs(C,{onSubmit:x,children:[a.jsxs(m,{className:"mb-3",children:[a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"nama",children:"Nama Lengkap"}),a.jsx(t,{name:"nama",value:e.nama,onChange:n})]}),a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"jenis_kelamin",children:"Jenis Kelamin"}),a.jsxs(y,{name:"jenis_kelamin",value:e.jenis_kelamin,onChange:n,children:[a.jsx("option",{value:"",children:"Pilih"}),a.jsx("option",{value:"L",children:"Laki-laki"}),a.jsx("option",{value:"P",children:"Perempuan"})]})]})]}),a.jsxs(m,{className:"mb-3",children:[a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"nomor_paspor",children:"Nomor Paspor"}),a.jsx(t,{name:"nomor_paspor",value:e.nomor_paspor,onChange:n})]}),a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"phone_number",children:"Nomor HP"}),a.jsx(t,{name:"phone_number",value:e.phone_number,onChange:n})]})]}),a.jsxs(m,{className:"mb-3",children:[a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"tanggal_lahir",children:"Tanggal Lahir"}),a.jsx(t,{type:"date",name:"tanggal_lahir",value:e.tanggal_lahir,onChange:n})]}),a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"tempat_lahir",children:"Tempat Lahir"}),a.jsx(t,{name:"tempat_lahir",value:e.tempat_lahir,onChange:n})]})]}),a.jsxs(m,{className:"mb-3",children:[a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"nik_ktp",children:"NIK KTP"}),a.jsx(t,{name:"nik_ktp",value:e.nik_ktp,onChange:n})]}),a.jsxs(i,{md:6,children:[a.jsx(r,{htmlFor:"email",children:"Email"}),a.jsx(t,{type:"email",name:"email",value:e.email,onChange:n})]})]}),a.jsx(m,{className:"mb-3",children:a.jsxs(i,{children:[a.jsx(r,{htmlFor:"alamat",children:"Alamat"}),a.jsx(t,{name:"alamat",value:e.alamat,onChange:n})]})}),a.jsx(f,{type:"submit",color:"primary",children:"Simpan Biodata"})]})})]})})};export{J as default};
