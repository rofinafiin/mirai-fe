import{q as x,a as u,j as a}from"./index-B1-eKH4b.js";import{a as g}from"./index-CjQjypWB.js";import{S as s}from"./sweetalert2.esm.all-89IKscqO.js";import{b as C,a as _}from"./index.esm-E8McK7Ap.js";import{C as b,a as k}from"./CCardBody-FVF2HMMr.js";import{C as f}from"./CCardHeader-CE2dMFoe.js";import{C as v}from"./CForm-DjpJhrTj.js";import{C as l,a as r}from"./CRow-ZjPcK2mc.js";import{C as t}from"./CFormLabel-C7WWX8b0.js";import{C as i}from"./CFormInput-DYJ8qQs8.js";import{C as F}from"./CFormSelect-CgLhGBlh.js";import"./CFormControlWrapper-x3YpMxDw.js";import"./CFormControlValidation-DDDdl_lv.js";import"./CFormText-BFAVlae9.js";const J=()=>{const c=x(),[e,p]=u.useState({nama:"",jenis_kelamin:"",nomor_paspor:"",phone_number:"",tanggal_lahir:"",tempat_lahir:"",nik_ktp:"",alamat:"",email:"",nama_ortu:"",handphone_ortu:"",alamat_ortu:""}),n=d=>{const{name:h,value:o}=d.target;p(m=>({...m,[h]:o}))},j=d=>{d.preventDefault();const h=g.get("login");if(!h)return s.fire({icon:"warning",title:"Tidak ada token",text:"Silakan login terlebih dahulu."});s.fire({title:"Menyimpan biodata...",text:"Mohon tunggu sebentar.",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{s.showLoading()}}),fetch("https://be-mirai.valla.cloud//api/users/administrasi/biodata",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(e)}).then(o=>o.json().then(m=>({ok:o.ok,data:m}))).then(({ok:o,data:m})=>{if(s.close(),!o)return s.fire({icon:"error",title:"Gagal Menyimpan",text:m.message||"Terjadi kesalahan saat menyimpan biodata."});s.fire({icon:"success",title:"Berhasil!",text:"Biodata berhasil disimpan."}).then(()=>{c("/tahapan/dokumen")})}).catch(o=>{s.close(),console.error("Error:",o),s.fire({icon:"error",title:"Kesalahan Jaringan",text:"Tidak dapat terhubung ke server. Coba lagi nanti."})})};return a.jsx(C,{children:a.jsxs(b,{className:"mt-4",children:[a.jsx(f,{children:a.jsx("h4",{children:"Biodata"})}),a.jsx(k,{children:a.jsxs(v,{onSubmit:j,children:[a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nama",children:"Nama Lengkap"}),a.jsx(i,{name:"nama",value:e.nama,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"jenis_kelamin",children:"Jenis Kelamin"}),a.jsxs(F,{name:"jenis_kelamin",value:e.jenis_kelamin,onChange:n,children:[a.jsx("option",{value:"",children:"Pilih"}),a.jsx("option",{value:"L",children:"Laki-laki"}),a.jsx("option",{value:"P",children:"Perempuan"})]})]})]}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nomor_paspor",children:"Nomor Paspor"}),a.jsx(i,{name:"nomor_paspor",value:e.nomor_paspor,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"phone_number",children:"Nomor HP"}),a.jsx(i,{name:"phone_number",value:e.phone_number,onChange:n})]})]}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"tanggal_lahir",children:"Tanggal Lahir"}),a.jsx(i,{type:"date",name:"tanggal_lahir",value:e.tanggal_lahir,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"tempat_lahir",children:"Tempat Lahir"}),a.jsx(i,{name:"tempat_lahir",value:e.tempat_lahir,onChange:n})]})]}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nik_ktp",children:"NIK KTP"}),a.jsx(i,{name:"nik_ktp",value:e.nik_ktp,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"email",children:"Email"}),a.jsx(i,{type:"email",name:"email",value:e.email,onChange:n})]})]}),a.jsx(l,{className:"mb-3",children:a.jsxs(r,{children:[a.jsx(t,{htmlFor:"alamat",children:"Alamat"}),a.jsx(i,{name:"alamat",value:e.alamat,onChange:n})]})}),a.jsxs(l,{className:"mb-3",children:[a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"nama_ortu",children:"Nama Orang Tua"}),a.jsx(i,{name:"nama_ortu",value:e.nama_ortu,onChange:n})]}),a.jsxs(r,{md:6,children:[a.jsx(t,{htmlFor:"handphone_ortu",children:"Nomor HP Orang Tua"}),a.jsx(i,{name:"handphone_ortu",value:e.handphone_ortu,onChange:n})]})]}),a.jsx(l,{className:"mb-3",children:a.jsxs(r,{children:[a.jsx(t,{htmlFor:"alamat_ortu",children:"Alamat Orang Tua"}),a.jsx(i,{name:"alamat_ortu",value:e.alamat_ortu,onChange:n})]})}),a.jsx(_,{type:"submit",color:"primary",children:"Simpan Biodata"})]})})]})})};export{J as default};
